<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodexDLC — Ваш бизнес. Наш IT-движок.</title>

    <!-- Anti-flash: применяем тему до рендера -->
    <script>
        (function () {
            var saved = localStorage.getItem('codex-theme');
            var prefer = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
            var theme = saved || prefer;
            var link = document.getElementById('theme-css');
            if (theme === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>

    <link id="theme-css" rel="stylesheet" href="src/backend_django/static/css/app.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=JetBrains+Mono:wght@500&family=Space+Grotesk:wght@600;700&display=swap" rel="stylesheet">

</head>
<body>

    <!-- Top Bar -->
    <header style="padding: 32px 0; position: absolute; width: 100%; z-index: 10;">
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <div class="brand-logo" id="brand-logo">
                <span class="brand-codex">Codex</span><span class="brand-dlc" id="brand-dlc">DLC</span>
                <span class="brand-tagline" id="brand-tagline"></span>
            </div>
            <div style="display: flex; align-items: center; gap: 24px; font-family: var(--font-mono); font-size: 12px; color: var(--gray-400);">
                <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme" id="theme-btn">[ * ]</button>
                <div class="lang-switcher">[ <a href="#" style="color: var(--cyber-blue);">RU</a> / EN / DE ]</div>
            </div>
        </div>
    </header>

    <!-- Floating Dock -->
    <nav class="floating-dock">
        <a href="#" class="dock-link active">Главная</a>
        <a href="#" class="dock-link">Услуги</a>
        <a href="#" class="dock-link">Прототипы</a>
        <a href="#" class="btn btn-primary" style="padding: 10px 24px; font-size: 14px; border-radius: 100px;">Связаться</a>
    </nav>

    <main>
        <!-- Block 1: Hero -->
        <section class="hero" id="hero-section">
            <div class="hero-bg"></div>
            <div class="hero-torch" id="hero-torch"></div>
            <div class="container hero-content">
                <span class="tech-label">SYSTEM_ONLINE // V.1.0</span>
                <h1 class="hero-title" style="font-size: clamp(48px, 10vw, 84px); line-height: 1.05; margin-bottom: 32px;">
                    Ваш бизнес.<br>Наш IT-движок.
                </h1>
                <p style="font-size: 20px; color: var(--gray-400); margin-bottom: 48px; max-width: 620px; line-height: 1.65;">
                    Разработка, хостинг и поддержка премиальных сайтов по подписке. Никаких технических забот — мы берем всё на себя.
                </p>
                <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                    <a href="#" class="btn btn-primary" style="padding: 20px 40px; font-size: 18px;">РАССЧИТАТЬ СТОИМОСТЬ</a>
                    <a href="#services" class="btn btn-secondary" style="padding: 20px 40px; font-size: 18px;">СМОТРЕТЬ УСЛУГИ</a>
                </div>
            </div>
        </section>

        <!-- Block 2: Problem vs Solution -->
        <section style="padding: 120px 0;">
            <div class="container">
                <span class="tech-label">MARKET_ANALYSIS</span>
                <h2 style="font-size: 40px; margin-bottom: 16px;">Проблема vs Решение</h2>
                <div class="contrast-grid">
                    <div class="contrast-card">
                        <h4 style="color: var(--gray-600);">CLASSIC_AGENCIES</h4>
                        <ul class="contrast-list">
                            <li>Огромные разовые чеки</li>
                            <li>Скрытые платежи за правки</li>
                            <li>Медленный WordPress / Конструкторы</li>
                            <li>Владелец сам управляет хостингом</li>
                        </ul>
                    </div>
                    <div class="contrast-card active">
                        <h4 style="color: var(--cyber-blue);">CODEXDLC_SUBSCRIPTION</h4>
                        <ul class="contrast-list">
                            <li>Комфортный ежемесячный платеж</li>
                            <li>Всё включено (правки, развитие)</li>
                            <li>Молниеносный кастомный код</li>
                            <li>24/7 мониторинг и поддержка</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Block 3: Z-Pattern Services -->
        <section id="services" class="z-section">
            <div class="container">
                <span class="tech-label">CORE_OFFERINGS</span>
                <h2 style="font-size: 40px; margin-bottom: 80px;">Что мы делаем</h2>

                <!-- 3.1 WaaS -->
                <div class="z-row" style="margin-bottom: 96px;">
                    <div class="z-text-block">
                        <div>
                            <span class="tech-label" style="margin-bottom: 12px;">01 // WEBSITE AS A SERVICE</span>
                            <h2>Сайты по подписке</h2>
                        </div>
                        <p>Премиальные сайты для сферы услуг. Никаких огромных разовых платежей и скрытых комиссий. Мы создаем платформу для сбора заявок, настраиваем почту, SEO и следим за сервером 24/7. Вы платите только фиксированную подписку.</p>
                        <ul class="contrast-list" style="margin-top: 8px;">
                            <li>Кастомный дизайн под нишу</li>
                            <li>SEO-оптимизация с первого дня</li>
                            <li>Домен, хостинг, почта включены</li>
                            <li>Правки без лимита в рамках подписки</li>
                        </ul>
                        <a href="#" class="z-link">ПОДРОБНЕЕ О ПОДПИСКЕ &nbsp;→</a>
                    </div>
                    <div class="z-visual">
                        <div class="z-visual-accent"></div>
                        <div style="text-align: center; z-index: 1;">
                            <div style="font-size: 10px; margin-bottom: 16px; color: var(--gray-600);">[ LILY_SALON_PREVIEW ]</div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; padding: 24px;">
                                <div style="height: 56px; background: var(--glass-bg-elevated); border-radius: 8px; border: 1px solid var(--glass-border);"></div>
                                <div style="height: 56px; background: var(--glass-bg-elevated); border-radius: 8px; border: 1px solid var(--glass-border);"></div>
                                <div style="height: 80px; grid-column: span 2; background: var(--glass-bg-elevated); border-radius: 8px; border: 1px solid var(--glass-border);"></div>
                                <div style="height: 40px; grid-column: span 2; background: var(--cyber-blue); opacity: 0.15; border-radius: 4px;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3.2 Telegram Bots -->
                <div class="z-row reverse" style="margin-bottom: 96px;">
                    <div class="z-text-block">
                        <div>
                            <span class="tech-label" style="margin-bottom: 12px;">02 // AUTOMATION</span>
                            <h2>Telegram-боты и автоматизация</h2>
                        </div>
                        <p>Хватит терять клиентов в переписках. Мы разрабатываем умных ботов, которые сами квалифицируют лидов, принимают записи и интегрируются с вашей базой данных. Ваш бизнес работает даже когда вы спите.</p>
                        <ul class="contrast-list" style="margin-top: 8px;">
                            <li>Квалификация лидов по сценарию (FSM)</li>
                            <li>Онлайн-запись через Telegram Web App</li>
                            <li>Уведомления администратору в реальном времени</li>
                            <li>Интеграция с CRM и базами данных</li>
                        </ul>
                        <a href="#" class="z-link">УЗНАТЬ ПРО АВТОМАТИЗАЦИЮ &nbsp;→</a>
                    </div>
                    <div class="z-visual blue-accent">
                        <div class="z-visual-accent"></div>
                        <div style="z-index: 1; padding: 24px; width: 100%;">
                            <div style="background: var(--glass-bg-elevated); border-radius: 12px; padding: 16px; border: 1px solid var(--glass-border);">
                                <div style="font-size: 10px; color: var(--gray-600); margin-bottom: 12px;">TELEGRAM_BOT // ACTIVE</div>
                                <div style="display: flex; flex-direction: column; gap: 8px;">
                                    <div style="background: var(--glass-bg); padding: 8px 12px; border-radius: 8px; font-size: 12px; color: var(--gray-400); border: 1px solid var(--glass-border);">Клиент: Хочу записаться на стрижку</div>
                                    <div style="background: rgba(0, 240, 255, 0.08); padding: 8px 12px; border-radius: 8px; font-size: 12px; color: var(--cyber-blue); border: 1px solid rgba(0,240,255,0.15); align-self: flex-end;">Бот: Выберите дату → [Открыть календарь]</div>
                                    <div style="display: flex; align-items: center; gap: 8px; margin-top: 4px;">
                                        <span class="status-dot" style="margin-right: 0;"></span>
                                        <span style="font-family: var(--font-mono); font-size: 10px; color: var(--status-green);">NEW_LEAD // ADMIN_NOTIFIED</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3.3 Prototypes -->
                <div class="z-row">
                    <div class="z-text-block">
                        <div>
                            <span class="tech-label" style="margin-bottom: 12px;">03 // PLUG & PLAY</span>
                            <h2>Прототип за 48 часов</h2>
                        </div>
                        <p>У нас есть собственная библиотека протестированных бизнес-шаблонов. Вы выбираете концепцию, и уже через 48 часов получаете рабочий интерактивный прототип. После согласования — запуск за 7–14 дней.</p>
                        <ul class="contrast-list" style="margin-top: 8px;">
                            <li>Салон красоты / Барбершоп</li>
                            <li>Монтаж и строительство</li>
                            <li>Автосервис / Локальные услуги</li>
                            <li>Настройка под ваш фирменный стиль</li>
                        </ul>
                        <a href="#" class="z-link">СМОТРЕТЬ ПРОТОТИПЫ &nbsp;→</a>
                    </div>
                    <div class="z-visual">
                        <div class="z-visual-accent"></div>
                        <div style="z-index: 1; padding: 24px; width: 100%;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
                                <div style="background: var(--glass-bg-elevated); border-radius: 8px; padding: 12px; border: 1px solid var(--glass-border); font-family: var(--font-mono); font-size: 9px; color: var(--gray-600); text-align: center;">LILY<br>SALON</div>
                                <div style="background: var(--glass-bg-elevated); border-radius: 8px; padding: 12px; border: 1px solid var(--glass-border); font-family: var(--font-mono); font-size: 9px; color: var(--gray-600); text-align: center;">DLC<br>MONTAGE</div>
                                <div style="background: var(--glass-bg-elevated); border-radius: 8px; padding: 12px; border: 1px solid rgba(0,240,255,0.25); font-family: var(--font-mono); font-size: 9px; color: var(--cyber-blue); text-align: center;">AUTO<br>HUB</div>
                                <div style="grid-column: span 3; background: var(--glass-bg-elevated); border-radius: 8px; padding: 12px; border: 1px solid var(--glass-border); font-family: var(--font-mono); font-size: 9px; color: var(--gray-600); text-align: center;">BUILDER PRO // CONSTRUCTION</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Block 4: Bento Grid (Subscription Value) -->
        <section style="padding: 120px 0;">
            <div class="container">
                <span class="tech-label">SUBSCRIPTION_VALUE</span>
                <h2 style="font-size: 40px; margin-bottom: 48px;">Что входит в подписку</h2>
                <div class="bento-grid">
                    <div class="bento-card" style="grid-column: span 8; grid-row: span 2; min-height: 400px;">
                        <div>
                            <h3>Кастомная разработка</h3>
                            <p style="color: var(--gray-400);">Индивидуальный интерфейс, спроектированный под ваши задачи. Никаких конструкторов.</p>
                        </div>
                        <div style="height: 180px; background: var(--glass-glow-blue); border: 1px dashed var(--glass-border); border-radius: 16px; margin-top: 32px; display: flex; align-items: center; justify-content: center; font-family: var(--font-mono); color: var(--gray-600); font-size: 12px;">[ LILY_SALON_PREVIEW ]</div>
                    </div>
                    <div class="bento-card" style="grid-column: span 4;">
                        <h3>SEO & Аналитика</h3>
                        <p style="color: var(--gray-400);">Постоянная оптимизация под поисковые системы. Core Web Vitals 100/100.</p>
                    </div>
                    <div class="bento-card" style="grid-column: span 4;">
                        <h3>Домен & Почта</h3>
                        <p style="color: var(--gray-400);">Полное управление инфраструктурой. Корпоративная почта включена.</p>
                    </div>
                    <div class="bento-card" style="grid-column: span 12; flex-direction: row; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span class="status-dot"></span>
                            <span style="font-family: var(--font-mono); font-size: 14px; color: var(--status-green);">UPTIME 99.9%</span>
                        </div>
                        <h3 style="margin: 0;">Техническая поддержка 24/7</h3>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Block 5: Tech Corner -->
        <section style="padding: 120px 0;">
            <div class="container">
                <span class="tech-label">UNDER_THE_HOOD</span>
                <h2 style="font-size: 40px; margin-bottom: 16px;">Надёжная архитектура</h2>
                <p style="font-size: 17px; color: var(--gray-400); max-width: 600px; margin-bottom: 0;">Мы не используем медленные конструкторы. Каждый проект — это кастомный стек, обеспечивающий Uptime 99.9% и молниеносную загрузку.</p>
                <div class="tech-bento">
                    <div class="bento-card" style="grid-column: span 5;">
                        <span class="tech-label" style="margin-bottom: 16px;">SYSTEM_ARCHITECT</span>
                        <h3 style="margin-bottom: 12px;">Full-Stack & System Design</h3>
                        <p style="color: var(--gray-400); font-size: 15px; line-height: 1.6;">Цель — делать сложные IT-продукты доступными для малого бизнеса. Архитектура под ваши задачи, не под «среднее решение».</p>
                        <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--glass-border); font-family: var(--font-mono); font-size: 10px; color: var(--gray-600);">DACH_REGION // EST. 2024</div>
                    </div>
                    <div class="bento-card" style="grid-column: span 7;">
                        <span class="tech-label" style="margin-bottom: 16px;">TECH_STACK</span>
                        <div class="tech-stack">
                            <span class="tech-badge active">Python</span>
                            <span class="tech-badge active">Django</span>
                            <span class="tech-badge active">FastAPI</span>
                            <span class="tech-badge active">HTMX</span>
                            <span class="tech-badge">Docker</span>
                            <span class="tech-badge">PostgreSQL</span>
                            <span class="tech-badge">Redis</span>
                            <span class="tech-badge">Aiogram</span>
                            <span class="tech-badge">Nginx</span>
                            <span class="tech-badge">CI/CD</span>
                        </div>
                        <div style="margin-top: 24px; padding: 16px; background: var(--glass-bg-elevated); border-radius: 8px; border: 1px solid var(--glass-border);">
                            <div style="font-family: var(--font-mono); font-size: 11px; color: var(--gray-600); margin-bottom: 8px;">// performance benchmark</div>
                            <div style="display: flex; gap: 32px;">
                                <div>
                                    <div style="font-family: var(--font-mono); font-size: 20px; color: var(--cyber-blue); font-weight: 600;">&lt;200ms</div>
                                    <div style="font-size: 12px; color: var(--gray-600); margin-top: 4px;">Time to First Byte</div>
                                </div>
                                <div>
                                    <div style="font-family: var(--font-mono); font-size: 20px; color: var(--status-green); font-weight: 600;">99.9%</div>
                                    <div style="font-size: 12px; color: var(--gray-600); margin-top: 4px;">Uptime SLA</div>
                                </div>
                                <div>
                                    <div style="font-family: var(--font-mono); font-size: 20px; color: var(--electric-purple); font-weight: 600;">100</div>
                                    <div style="font-size: 12px; color: var(--gray-600); margin-top: 4px;">Lighthouse Score</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Block 6: Portfolio Marquee -->
        <section style="padding: 80px 0;">
            <div class="marquee">
                <div class="marquee-content">
                    <span class="marquee-item">LILY SALON</span>
                    <span class="marquee-item" style="color: var(--gray-600);">//</span>
                    <span class="marquee-item">DLC MONTAGE</span>
                    <span class="marquee-item" style="color: var(--gray-600);">//</span>
                    <span class="marquee-item">BUILDER PRO</span>
                    <span class="marquee-item" style="color: var(--gray-600);">//</span>
                    <span class="marquee-item">AUTO SERVICE HUB</span>
                    <span class="marquee-item" style="color: var(--gray-600);">//</span>
                    <span class="marquee-item">LILY SALON</span>
                    <span class="marquee-item" style="color: var(--gray-600);">//</span>
                    <span class="marquee-item">DLC MONTAGE</span>
                    <span class="marquee-item" style="color: var(--gray-600);">//</span>
                    <span class="marquee-item">BUILDER PRO</span>
                    <span class="marquee-item" style="color: var(--gray-600);">//</span>
                    <span class="marquee-item">AUTO SERVICE HUB</span>
                    <span class="marquee-item" style="color: var(--gray-600);">//</span>
                </div>
            </div>
        </section>

        <!-- Block 7: Final Funnel -->
        <section style="padding: 140px 0;">
            <div class="container" style="max-width: 650px; text-align: center;">
                <span class="tech-label">EXECUTE_DEPLOYMENT</span>
                <h2 style="font-size: 48px; margin-bottom: 24px;">Готовы автоматизировать заявки?</h2>
                <p style="color: var(--gray-400); font-size: 17px; margin-bottom: 56px;">Оставьте контакт — мы разберём задачи вашего бизнеса и предложим решение в течение 24 часов.</p>
                <div style="text-align: left; background: var(--glass-bg); padding: 40px; border-radius: var(--radius-bento); border: 1px solid var(--glass-border);">
                    <input type="text" class="terminal-input" placeholder="Email или Телефон..." style="font-size: 20px; margin-bottom: 32px;">
                    <button class="btn btn-primary" style="width: 100%; padding: 24px; font-size: 18px;">ИНИЦИИРОВАТЬ ПРОЕКТ</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Island Footer -->
    <footer class="island-footer">
        <div class="footer-grid">
            <div style="grid-column: span 6;">
                <div class="brand" style="font-family: var(--font-headings); font-size: 28px; font-weight: 700; margin-bottom: 24px;">
                    Codex<span style="color: var(--cyber-blue);">DLC</span>
                </div>
                <p style="color: var(--gray-400); font-size: 14px; max-width: 350px; line-height: 1.6;">Digital Lead Conversion. Мы строим системы, которые превращают техническую сложность в рост бизнеса.</p>
            </div>
            <div style="grid-column: span 3;">
                <h4 style="font-family: var(--font-mono); font-size: 12px; color: var(--gray-600); margin-bottom: 24px; text-transform: uppercase; letter-spacing: 1px;">SERVICES</h4>
                <ul style="list-style: none; display: flex; flex-direction: column; gap: 12px; font-size: 14px; color: var(--gray-400);">
                    <li>WaaS Subscription</li>
                    <li>Telegram Bots</li>
                    <li>Prototypes</li>
                </ul>
            </div>
            <div style="grid-column: span 3;">
                <h4 style="font-family: var(--font-mono); font-size: 12px; color: var(--gray-600); margin-bottom: 24px; text-transform: uppercase; letter-spacing: 1px;">LEGAL</h4>
                <ul style="list-style: none; display: flex; flex-direction: column; gap: 12px; font-size: 14px; color: var(--gray-400);">
                    <li>Impressum</li>
                    <li>Datenschutz</li>
                </ul>
            </div>
        </div>
        <div class="island-footer-bottom">
            <div>COPYRIGHT &copy; 2026 CODEXDLC. ALL RIGHTS RESERVED.</div>
            <div>V.1.0.4 // DACH_REGION</div>
        </div>
    </footer>

    <script>
        var DARK_CSS = 'src/backend_django/static/css/app.css';
        var LIGHT_CSS = 'src/backend_django/static/css/app-light.css';
        var themeLink = document.getElementById('theme-css');
        var themeBtn = document.getElementById('theme-btn');

        function getTheme() {
            return document.documentElement.getAttribute('data-theme') === 'light' ? 'light' : 'dark';
        }

        function applyTheme(theme) {
            if (theme === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
                themeLink.href = LIGHT_CSS;
                themeBtn.textContent = '[ D ]';
            } else {
                document.documentElement.removeAttribute('data-theme');
                themeLink.href = DARK_CSS;
                themeBtn.textContent = '[ L ]';
            }
            localStorage.setItem('codex-theme', theme);
        }

        function toggleTheme() {
            applyTheme(getTheme() === 'dark' ? 'light' : 'dark');
        }

        (function () {
            var current = getTheme();
            themeBtn.textContent = current === 'light' ? '[ D ]' : '[ L ]';
            if (current === 'light') {
                themeLink.href = LIGHT_CSS;
            }
        })();
    </script>

    <!-- Logo DLC Animation -->
    <script>
        (function () {
            var dlcEl     = document.getElementById('brand-dlc');
            var taglineEl = document.getElementById('brand-tagline');

            // Taglines per page — extensible when new pages added
            var taglines = [
                'Digital Lead Conversion',
                'Digital Local Clients',
                'Developer\'s Life Cycle',
                'Digital Life Creation'
            ];
            var current = 0;

            // Phase timing (ms)
            var T_HOLD    = 1800;   // show "CodexDLC" at start
            var T_FADE    = 400;    // DLC fades out
            var T_PAUSE   = 200;    // bare "Codex" moment
            var T_TAGLINE = 320;    // tagline fades in
            var T_READ    = 3200;   // tagline visible
            var T_OUT     = 340;    // tagline + DLC fade back
            var T_RESTORE = 300;    // DLC back in

            function runCycle() {
                var tag = taglines[current];
                current = (current + 1) % taglines.length;

                // 1. Hold "CodexDLC"
                setTimeout(function () {
                    // 2. Fade DLC out (down)
                    dlcEl.classList.add('dlc-out');
                }, T_HOLD);

                setTimeout(function () {
                    // 3. Show tagline
                    taglineEl.textContent = tag;
                    taglineEl.classList.add('tagline-in');
                }, T_HOLD + T_FADE + T_PAUSE);

                setTimeout(function () {
                    // 4. Fade tagline out, restore DLC
                    taglineEl.classList.remove('tagline-in');
                    taglineEl.classList.add('tagline-out');
                }, T_HOLD + T_FADE + T_PAUSE + T_TAGLINE + T_READ);

                setTimeout(function () {
                    dlcEl.classList.remove('dlc-out');
                    dlcEl.classList.add('dlc-in');
                }, T_HOLD + T_FADE + T_PAUSE + T_TAGLINE + T_READ + T_OUT * 0.5);

                var total = T_HOLD + T_FADE + T_PAUSE + T_TAGLINE + T_READ + T_OUT + T_RESTORE;
                setTimeout(function () {
                    taglineEl.classList.remove('tagline-out');
                    dlcEl.classList.remove('dlc-in');
                    runCycle();
                }, total);
            }

            // Start after page settles
            setTimeout(runCycle, 1200);
        })();
    </script>

    <!-- Hero torch + Z-row parallax -->
    <script>
        (function () {
            var hero    = document.getElementById('hero-section');
            var torch   = document.getElementById('hero-torch');
            var raf     = null;
            var tx = 0, ty = 0;   // target
            var cx = 0, cy = 0;   // current (lerped)

            hero.addEventListener('mousemove', function (e) {
                var r = hero.getBoundingClientRect();
                tx = e.clientX - r.left;
                ty = e.clientY - r.top;
                if (!raf) raf = requestAnimationFrame(animTorch);
            });

            hero.addEventListener('mouseleave', function () {
                torch.style.opacity = '0';
                if (raf) { cancelAnimationFrame(raf); raf = null; }
            });

            hero.addEventListener('mouseenter', function () {
                torch.style.opacity = '1';
            });

            function animTorch() {
                cx += (tx - cx) * 0.10;
                cy += (ty - cy) * 0.10;
                torch.style.left = cx + 'px';
                torch.style.top  = cy + 'px';
                raf = requestAnimationFrame(animTorch);
            }

            // Z-row parallax: visual block shifts slightly on row hover
            var zRows = document.querySelectorAll('.z-row');
            zRows.forEach(function (row) {
                var visual = row.querySelector('.z-visual');
                if (!visual) return;

                row.addEventListener('mousemove', function (e) {
                    var r = row.getBoundingClientRect();
                    var nx = (e.clientX - r.left) / r.width  - 0.5;  // -0.5..0.5
                    var ny = (e.clientY - r.top)  / r.height - 0.5;
                    visual.style.transform = 'translate(' + (nx * 12) + 'px, ' + (ny * 8) + 'px)';
                });

                row.addEventListener('mouseleave', function () {
                    visual.style.transform = 'translate(0, 0)';
                });
            });
        })();
    </script>

</body>
</html>
