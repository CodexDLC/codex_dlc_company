{% load i18n %}
<header>
    <div class="container header-inner">

        {# Brand Logo #}
        <a href="{% url 'main:index' %}" class="brand-logo" id="brand-logo">
            <span class="brand-codex">Codex</span><span class="brand-dlc" id="brand-dlc">DLC</span>
            <span class="brand-tagline" id="brand-tagline"></span>
        </a>

        {# Controls: theme toggle + lang switcher #}
        <div class="header-controls">
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme" id="theme-btn">[ * ]</button>

            {# Language Switcher â€” uses Django's set_language redirect view #}
            {% get_current_language as CURRENT_LANG %}
            {% get_available_languages as AVAILABLE_LANGUAGES %}
            <div class="lang-switcher">
                [
                {% for lang_code, lang_name in AVAILABLE_LANGUAGES %}
                {% if not forloop.first %}/{% endif %}
                {% if CURRENT_LANG == lang_code %}
                <span class="active-lang">{{ lang_code|upper }}</span>
                {% else %}
                <form action="{% url 'set_language' %}" method="post" class="lang-form">
                    {% csrf_token %}
                    <input type="hidden" name="language" value="{{ lang_code }}">
                    <input type="hidden" name="next" value="{{ path_without_lang }}">
                    <button type="submit" class="lang-btn">{{ lang_code|upper }}</button>
                </form>
                {% endif %}
                {% endfor %}
                ]
            </div>
        </div>

    </div>
</header>